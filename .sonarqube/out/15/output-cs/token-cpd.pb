¶¼
OC:\ProgramData\Jenkins\.jenkins\workspace\GamePipeline\Projects\2048\Program.cs
ConsoleColor 
[ 
] 
Colors 
= 
{ 
ConsoleColor 
. 
DarkBlue 
, 
ConsoleColor 
. 
	DarkGreen 
, 
ConsoleColor		 
.		 
DarkCyan		 
,		 
ConsoleColor

 
.

 
DarkRed

 
,

 
ConsoleColor 
. 
DarkMagenta 
, 
ConsoleColor 
. 

DarkYellow 
, 
ConsoleColor 
. 
Blue 
, 
ConsoleColor 
. 
Red 
, 
ConsoleColor 
. 
Magenta 
, 
} 
; 
try 
{ 
Console 
. 	
CursorVisible	 
= 
false 
; 
Random 
random 
= 
new 
( 
) 
; 
while 
( 
true 
) 
{ 
NewBoard 	
:	 

Console 	
.	 

Clear
 
( 
) 
; 
int 
? 
[ 
, 
] 	
board
 
= 
new 
int 
? 
[ 
$num 
, 
$num 
]  
;  !
int 
score 
= 
$num 
; 
while 
( 	
true	 
) 
{ 
bool 
IsNull 
( 
( 
int 
X 
, 
int 
Y 
) 
point #
)# $
=>% '
board( -
[- .
point. 3
.3 4
X4 5
,5 6
point7 <
.< =
Y= >
]> ?
is@ B
nullC G
;G H
int   
	nullCount   
=   
BoardValues   
(   
board   $
)  $ %
.  % &
Count  & +
(  + ,
IsNull  , 2
)  2 3
;  3 4
if!! 
(!! 
	nullCount!! 
==!! 
$num!! 
)!! 
{"" 
goto## 
GameOver##	 
;## 
}$$ 
int%% 
index%% 
=%% 
random%% 
.%% 
Next%% 
(%% 
$num%% 
,%% 
	nullCount%% '
)%%' (
;%%( )
var&& 
(&& 
x&& 	
,&&	 

y&& 
)&& 
=&& 
BoardValues&& 
(&& 
board&& !
)&&! "
.&&" #
Where&&# (
(&&( )
IsNull&&) /
)&&/ 0
.&&0 1
	ElementAt&&1 :
(&&: ;
index&&; @
)&&@ A
;&&A B
board'' 
['' 	
x''	 

,''
 
y'' 
]'' 
='' 
random'' 
.'' 
Next'' 
('' 
$num'' 
)''  
<''! "
$num''# $
?''% &
$num''' (
:'') *
$num''+ ,
;'', -
score(( 
+=((	 
$num(( 
;(( 
if++ 
(++ 
!++ 
	TryUpdate++ 
(++ 
(++ 
int++ 
?++ 
[++ 
,++ 
]++ 
)++ 
board++  
.++  !
Clone++! &
(++& '
)++' (
,++( )
ref++* -
score++. 3
,++3 4
	Direction++5 >
.++> ?
Up++? A
)++A B
&&++C E
!,, 
	TryUpdate,, 
(,, 
(,, 
int,, 
?,, 
[,, 
,,, 
],, 
),, 
board,, 
.,, 
Clone,, #
(,,# $
),,$ %
,,,% &
ref,,' *
score,,+ 0
,,,0 1
	Direction,,2 ;
.,,; <
Down,,< @
),,@ A
&&,,B D
!-- 
	TryUpdate-- 
(-- 
(-- 
int-- 
?-- 
[-- 
,-- 
]-- 
)-- 
board-- 
.-- 
Clone-- #
(--# $
)--$ %
,--% &
ref--' *
score--+ 0
,--0 1
	Direction--2 ;
.--; <
Left--< @
)--@ A
&&--B D
!.. 
	TryUpdate.. 
(.. 
(.. 
int.. 
?.. 
[.. 
,.. 
].. 
).. 
board.. 
... 
Clone.. #
(..# $
)..$ %
,..% &
ref..' *
score..+ 0
,..0 1
	Direction..2 ;
...; <
Right..< A
)..A B
)..B C
{// 
goto00 
GameOver00	 
;00 
}11 
Render33 	
(33	 

board33
 
,33 
score33 
)33 
;33 
	Direction44 
	direction44 
;44 
GetDirection55 
:55 
switch66 	
(66
 
Console66 
.66 
ReadKey66 
(66 
true66 
)66  
.66  !
Key66! $
)66$ %
{77 
case88 

ConsoleKey88	 
.88 
UpArrow88 
:88 
	direction88  )
=88* +
	Direction88, 5
.885 6
Up886 8
;888 9
break88: ?
;88? @
case99 

ConsoleKey99	 
.99 
	DownArrow99 
:99 
	direction99  )
=99* +
	Direction99, 5
.995 6
Down996 :
;99: ;
break99< A
;99A B
case:: 

ConsoleKey::	 
.:: 
	LeftArrow:: 
::: 
	direction::  )
=::* +
	Direction::, 5
.::5 6
Left::6 :
;::: ;
break::< A
;::A B
case;; 

ConsoleKey;;	 
.;; 

RightArrow;; 
:;; 
	direction;;  )
=;;* +
	Direction;;, 5
.;;5 6
Right;;6 ;
;;;; <
break;;= B
;;;B C
case<< 

ConsoleKey<<	 
.<< 
End<< 
:<< 
goto<< 
NewBoard<< &
;<<& '
case== 

ConsoleKey==	 
.== 
Escape== 
:== 
goto==  
Close==! &
;==& '
default>> 
:>> 
goto>> 
GetDirection>> 
;>> 
}?? 
if@@ 
(@@ 
!@@ 
	TryUpdate@@ 
(@@ 
board@@ 
,@@ 
ref@@ 
score@@ "
,@@" #
	direction@@$ -
)@@- .
)@@. /
{AA 
gotoBB 
GetDirectionBB	 
;BB 
}CC 
}DD 
GameOverEE 	
:EE	 

RenderFF 
(FF 	
boardFF	 
,FF 
scoreFF 
)FF 
;FF 
ConsoleGG 	
.GG	 

	WriteLineGG
 
(GG 
$"GG 
$strGG "
"GG" #
)GG# $
;GG$ %
ConsoleHH 	
.HH	 

	WriteLineHH
 
(HH 
)HH 
;HH 
ConsoleII 	
.II	 

	WriteLineII
 
(II 
$strII ;
)II; <
;II< =
GetInputJJ 	
:JJ	 

switchKK 
(KK	 

ConsoleKK
 
.KK 
ReadKeyKK 
(KK 
trueKK 
)KK 
.KK  
KeyKK  #
)KK# $
{LL 
caseMM 

ConsoleKeyMM 
.MM 
EnterMM 
:MM 
gotoMM 
NewBoardMM '
;MM' (
caseNN 

ConsoleKeyNN 
.NN 
EscapeNN 
:NN 
gotoNN 
CloseNN  %
;NN% &
defaultOO 

:OO
 
gotoOO 
GetInputOO 
;OO 
}PP 
}QQ 
CloseRR 
:RR 
ConsoleSS 
.SS 	
ClearSS	 
(SS 
)SS 
;SS 
ConsoleTT 
.TT 	
WriteTT	 
(TT 
$strTT !
)TT! "
;TT" #
}UU 
finallyVV 
{WW 
ConsoleXX 
.XX 	
CursorVisibleXX	 
=XX 
trueXX 
;XX 
}YY 
bool[[ 
	TryUpdate[[ 
([[ 
int[[ 
?[[ 
[[[ 
,[[ 
][[ 
board[[ 
,[[ 
ref[[ !
int[[" %
score[[& +
,[[+ ,
	Direction[[- 6
	direction[[7 @
)[[@ A
{\\ 
(]] 
int]] 
X]] 
,]] 
int]]	 
Y]] 
)]] 
Adjacent]] 
(]] 
int]] 
x]] 
,]] 
int]]  #
y]]$ %
)]]% &
=>]]' )
	direction^^ 
switch^^ 
{__ 
	Direction`` 
.`` 
Up`` 
=>`` 
(`` 
x`` 
+`` 
$num`` 
,`` 
y`` 
)``  
,``  !
	Directionaa 
.aa 
Downaa 
=>aa 
(aa 
xaa 
-aa 
$numaa 
,aa 
yaa 
)aa  
,aa  !
	Directionbb 
.bb 
Leftbb 
=>bb 
(bb 
xbb 
,bb 
ybb 
-bb 
$numbb 
)bb  
,bb  !
	Directioncc 
.cc 
Rightcc 
=>cc 
(cc 
xcc 
,cc 
ycc 
+cc 
$numcc 
)cc  
,cc  !
_dd 
=>dd 
throwdd 
newdd #
NotImplementedExceptiondd )
(dd) *
)dd* +
,dd+ ,
}ee 
;ee 
(gg 
intgg 
Xgg 
,gg 
intgg	 
Ygg 
)gg 
Mapgg 
(gg 
intgg 
xgg 
,gg 
intgg 
ygg  
)gg  !
=>gg" $
	directionhh 
switchhh 
{ii 
	Directionjj 
.jj 
Upjj 
=>jj 
(jj 
boardjj 
.jj 
	GetLengthjj &
(jj& '
$numjj' (
)jj( )
-jj* +
xjj, -
-jj. /
$numjj0 1
,jj1 2
yjj3 4
)jj4 5
,jj5 6
	Directionkk 
.kk 
Downkk 
=>kk 
(kk 
xkk 
,kk 
ykk 
)kk 
,kk 
	Directionll 
.ll 
Leftll 
=>ll 
(ll 
xll 
,ll 
yll 
)ll 
,ll 
	Directionmm 
.mm 
Rightmm 
=>mm 
(mm 
xmm 
,mm 
boardmm 
.mm  
	GetLengthmm  )
(mm) *
$nummm* +
)mm+ ,
-mm- .
ymm/ 0
-mm1 2
$nummm3 4
)mm4 5
,mm5 6
_nn 
=>nn 
thrownn 
newnn #
NotImplementedExceptionnn )
(nn) *
)nn* +
,nn+ ,
}oo 
;oo 
boolqq 
[qq 
,qq 
]qq 
lockedqq	 
=qq 
newqq 
boolqq 
[qq 
boardqq  
.qq  !
	GetLengthqq! *
(qq* +
$numqq+ ,
)qq, -
,qq- .
boardqq/ 4
.qq4 5
	GetLengthqq5 >
(qq> ?
$numqq? @
)qq@ A
]qqA B
;qqB C
boolss 
updatess 
=ss 
falsess 
;ss 
foruu 
(uu 
intuu 	
iuu
 
=uu 
$numuu 
;uu 
iuu 
<uu 
boarduu 
.uu 
	GetLengthuu $
(uu$ %
$numuu% &
)uu& '
;uu' (
iuu) *
++uu* ,
)uu, -
{vv 
forww 
(ww 
intww 

jww 
=ww 
$numww 
;ww 
jww 
<ww 
boardww 
.ww 
	GetLengthww %
(ww% &
$numww& '
)ww' (
;ww( )
jww* +
++ww+ -
)ww- .
{xx 
varyy 
(yy 
tempiyy 
,yy 
tempjyy 
)yy 
=yy 
Mapyy 
(yy 
iyy 
,yy 
jyy  
)yy  !
;yy! "
ifzz 
(zz 
boardzz 
[zz 
tempizz 
,zz 
tempjzz 
]zz 
iszz 
nullzz "
)zz" #
{{{ 
continue|| 
;|| 
}}} 
KeepChecking~~ 
:~~ 
var 
( 
adji 
, 
adjj 
) 
= 
Adjacent 
( 
tempi $
,$ %
tempj& +
)+ ,
;, -
if
 
(
 
adji
 
<
 
$num
 
||
 
adji
 
>=
 
board
  
.
  !
	GetLength
! *
(
* +
$num
+ ,
)
, -
||
. 0
adjj
 
<
	 

$num
 
||
 
adjj
 
>=
 
board
 
.
 
	GetLength
 '
(
' (
$num
( )
)
) *
||
+ -
locked
 

[

 
adji
 
,
 
adjj
 
]
 
)
 
{
 
continue
 
;
 
}
 
else
 
if
 

(
 
board
 
[
 
adji
 
,
 
adjj
 
]
 
is
  
null
! %
)
% &
{
 
board
 	
[
	 

adji

 
,
 
adjj
 
]
 
=
 
board
 
[
 
tempi
 #
,
# $
tempj
% *
]
* +
;
+ ,
board
 	
[
	 

tempi

 
,
 
tempj
 
]
 
=
 
null
 
;
 
update
 

=
 
true
 
;
 
tempi
 	
=

 
adji
 
;
 
tempj
 	
=

 
adjj
 
;
 
goto
 
KeepChecking
	 
;
 
}
 
else
 
if
 

(
 
board
 
[
 
adji
 
,
 
adjj
 
]
 
==
  
board
! &
[
& '
tempi
' ,
,
, -
tempj
. 3
]
3 4
)
4 5
{
 
board
 	
[
	 

adji

 
,
 
adjj
 
]
 
+=
 
board
 
[
 
tempi
 $
,
$ %
tempj
& +
]
+ ,
;
, -
score
 	
+=

 
board
 
[
 
adji
 
,
 
adjj
 
]
 
!
 
.
  
Value
  %
;
% &
board
 	
[
	 

tempi

 
,
 
tempj
 
]
 
=
 
null
 
;
 
update
 

=
 
true
 
;
 
locked
 

[

 
adji
 
,
 
adjj
 
]
 
=
 
true
 
;
 
}
 
}
 
}
 
return
 
update
 
;
 
} 
IEnumerable 
<
 
(
 
int
 
,
 
int
 
)
 
>
 
BoardValues
 #
(
# $
int
$ '
?
' (
[
( )
,
) *
]
* +
board
, 1
)
1 2
{ 
for
 
(
 
int
 	
i

 
=
 
board
 
.
 
	GetLength
 
(
 
$num
 
)
  
-
! "
$num
# $
;
$ %
i
& '
>=
( *
$num
+ ,
;
, -
i
. /
--
/ 1
)
1 2
{
 
for
   
(
   
int
   

j
   
=
   
$num
   
;
   
j
   
<
   
board
   
.
   
	GetLength
   %
(
  % &
$num
  & '
)
  ' (
;
  ( )
j
  * +
++
  + -
)
  - .
{
¡¡ 
yield
¢¢ 
return
¢¢	 
(
¢¢ 
i
¢¢ 
,
¢¢ 
j
¢¢ 
)
¢¢ 
;
¢¢ 
}
££ 
}
¤¤ 
}¥¥ 
ConsoleColor§§ 
GetColor
§§ 
(
§§ 
int
§§ 
?
§§ 
value
§§  
)
§§  !
=>
§§" $
value
¨¨ 
is
¨¨ 

null
¨¨ 
?
©© 
ConsoleColor
©© 
.
©© 
DarkGray
©© 
:
ªª 
Colors
ªª 
[
ªª 
(
ªª 
value
ªª 
.
ªª 
Value
ªª 
/
ªª 
$num
ªª 
-
ªª 
$num
ªª  
)
ªª  !
%
ªª" #
Colors
ªª$ *
.
ªª* +
Length
ªª+ 1
]
ªª1 2
;
ªª2 3
void¬¬ 
Render
¬¬ 
(
¬¬ 
int
¬¬ 
?
¬¬ 
[
¬¬ 
,
¬¬ 
]
¬¬ 
board
¬¬ 
,
¬¬ 
int
¬¬ 
score
¬¬ $
)
¬¬$ %
{­­ 
int
®® 

horizontal
®® 
=
®® 
board
®® 
.
®® 
	GetLength
®® !
(
®®! "
$num
®®" #
)
®®# $
*
®®% &
$num
®®' (
;
®®( )
string
¯¯ 
horizontalBar
¯¯ 
=
¯¯ 
new
¯¯ 
(
¯¯ 
$char
¯¯ 
,
¯¯  

horizontal
¯¯! +
)
¯¯+ ,
;
¯¯, -
string
°° 
horizontalSpace
°° 
=
°° 
new
°° 
(
°° 
$char
°° !
,
°°! "

horizontal
°°# -
)
°°- .
;
°°. /
Console
²² 
.
²² 	
SetCursorPosition
²²	 
(
²² 
$num
²² 
,
²² 
$num
²² 
)
²²  
;
²²  !
Console
³³ 
.
³³ 	
	WriteLine
³³	 
(
³³ 
$str
³³ 
)
³³ 
;
³³ 
Console
´´ 
.
´´ 	
	WriteLine
´´	 
(
´´ 
)
´´ 
;
´´ 
Console
µµ 
.
µµ 	
	WriteLine
µµ	 
(
µµ 
$"
µµ 
$str
µµ 
{
µµ 
horizontalBar
µµ $
}
µµ$ %
$str
µµ% &
"
µµ& '
)
µµ' (
;
µµ( )
Console
¶¶ 
.
¶¶ 	
	WriteLine
¶¶	 
(
¶¶ 
$"
¶¶ 
$str
¶¶ 
{
¶¶ 
horizontalSpace
¶¶ &
}
¶¶& '
$str
¶¶' (
"
¶¶( )
)
¶¶) *
;
¶¶* +
for
·· 
(
·· 
int
·· 	
i
··
 
=
·· 
board
·· 
.
·· 
	GetLength
·· 
(
·· 
$num
·· 
)
··  
-
··! "
$num
··# $
;
··$ %
i
··& '
>=
··( *
$num
··+ ,
;
··, -
i
··. /
--
··/ 1
)
··1 2
{
¸¸ 
Console
¹¹ 	
.
¹¹	 

Write
¹¹
 
(
¹¹ 
$str
¹¹ 
)
¹¹ 
;
¹¹ 
for
ºº 
(
ºº 
int
ºº 

j
ºº 
=
ºº 
$num
ºº 
;
ºº 
j
ºº 
<
ºº 
board
ºº 
.
ºº 
	GetLength
ºº %
(
ºº% &
$num
ºº& '
)
ºº' (
;
ºº( )
j
ºº* +
++
ºº+ -
)
ºº- .
{
»» 
Console
¼¼ 

.
¼¼
 
Write
¼¼ 
(
¼¼ 
$str
¼¼ 
)
¼¼ 
;
¼¼ 
ConsoleColor
½½ 

background
½½ 
=
½½ 
Console
½½ $
.
½½$ %
BackgroundColor
½½% 4
;
½½4 5
Console
¾¾ 

.
¾¾
 
BackgroundColor
¾¾ 
=
¾¾ 
GetColor
¾¾ %
(
¾¾% &
board
¾¾& +
[
¾¾+ ,
i
¾¾, -
,
¾¾- .
j
¾¾/ 0
]
¾¾0 1
)
¾¾1 2
;
¾¾2 3
Console
¿¿ 

.
¿¿
 
Write
¿¿ 
(
¿¿ 
string
¿¿ 
.
¿¿ 
Format
¿¿ 
(
¿¿ 
$str
¿¿ &
,
¿¿& '
board
¿¿( -
[
¿¿- .
i
¿¿. /
,
¿¿/ 0
j
¿¿1 2
]
¿¿2 3
)
¿¿3 4
)
¿¿4 5
;
¿¿5 6
Console
ÀÀ 

.
ÀÀ
 
BackgroundColor
ÀÀ 
=
ÀÀ 

background
ÀÀ '
;
ÀÀ' (
Console
ÁÁ 

.
ÁÁ
 
Write
ÁÁ 
(
ÁÁ 
$str
ÁÁ 
)
ÁÁ 
;
ÁÁ 
}
ÂÂ 
Console
ÃÃ 	
.
ÃÃ	 

	WriteLine
ÃÃ
 
(
ÃÃ 
$str
ÃÃ 
)
ÃÃ 
;
ÃÃ 
Console
ÄÄ 	
.
ÄÄ	 

	WriteLine
ÄÄ
 
(
ÄÄ 
$"
ÄÄ 
$str
ÄÄ 
{
ÄÄ 
horizontalSpace
ÄÄ '
}
ÄÄ' (
$str
ÄÄ( )
"
ÄÄ) *
)
ÄÄ* +
;
ÄÄ+ ,
}
ÅÅ 
Console
ÆÆ 
.
ÆÆ 	
	WriteLine
ÆÆ	 
(
ÆÆ 
$"
ÆÆ 
$str
ÆÆ 
{
ÆÆ 
horizontalBar
ÆÆ $
}
ÆÆ$ %
$str
ÆÆ% &
"
ÆÆ& '
)
ÆÆ' (
;
ÆÆ( )
Console
ÇÇ 
.
ÇÇ 	
	WriteLine
ÇÇ	 
(
ÇÇ 
$"
ÇÇ 
$str
ÇÇ 
{
ÇÇ 
score
ÇÇ "
}
ÇÇ" #
"
ÇÇ# $
)
ÇÇ$ %
;
ÇÇ% &
}ÈÈ 
publicÊÊ 
enum
ÊÊ 
	Direction
ÊÊ 
{ËË 
Up
ÌÌ 
=
ÌÌ 
$num
ÌÌ 
,
ÌÌ 
Down
ÍÍ 
=
ÍÍ 
$num
ÍÍ 	
,
ÍÍ	 

Left
ÎÎ 
=
ÎÎ 
$num
ÎÎ 	
,
ÎÎ	 

Right
ÏÏ 
=
ÏÏ 
$num
ÏÏ	 

,
ÏÏ
 
}ÐÐ 